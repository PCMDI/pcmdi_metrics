

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Technical Overview &mdash; PCMDI Metrics 1.2.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Install using Anaconda" href="install-using-anaconda.html" />
    <link rel="prev" title="PCMDI metrics package (PMP)" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> PCMDI Metrics
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Technical Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#summary">Summary</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#software-framework-and-dependancies">Software framework and dependancies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#input-output-format">Input/Output format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#basic-operation">Basic Operation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li class="toctree-l3"><a class="reference internal" href="#future-developments-and-challenges">Future developments and challenges</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="install-using-anaconda.html">Install using Anaconda</a></li>
<li class="toctree-l1"><a class="reference internal" href="using-the-package.html">Using the Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="pmp-using-cdp-guide.html">PMP using CDP Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="pmpparser.html">PMPParser</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PCMDI Metrics</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Technical Overview</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/Technical-overview.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="technical-overview">
<h1>Technical Overview<a class="headerlink" href="#technical-overview" title="Permalink to this headline">¶</a></h1>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>The PMP provides a diverse suite of analysis utilities each of which produce summary statistics that gauge the consistency between climate model simulations and available observations.  The primary application of the PMP is to evaluate simulations from the <a class="reference external" href="https://www.wcrp-climate.org/wgcm-cmip">Coupled Model Intercomparison Project (CMIP)</a> but it can also be used to provide objective performance ssummaries during the model development process as well as selected research purposes.  The notes below provide a brief summary of some of the key aspects of the PMP design.</p>
<div class="section" id="software-framework-and-dependancies">
<h3>Software framework and dependancies<a class="headerlink" href="#software-framework-and-dependancies" title="Permalink to this headline">¶</a></h3>
<p>Most of the PMP is based on <a class="reference external" href="https://www.python.org/">Python</a> 3 and built upon the Climate Data Analysis Tools (<a class="reference external" href="https://cdat.llnl.gov">CDAT</a>).  The key component of CDAT used by the PMP is the Community Data Management System (<a class="reference external" href="https://cdms.readthedocs.io/en/latest/manual/cdms_1.html">CDMS</a>) which provides access to a powerful collection of climate specific utilites.</p>
</div>
<div class="section" id="input-output-format">
<h3>Input/Output format<a class="headerlink" href="#input-output-format" title="Permalink to this headline">¶</a></h3>
<p>The PMP is designed to most readily handle model output that adheres to the <a class="reference external" href="https://cfconventions.org/">Climate-Forecast (CF) data conventions</a>.  More specifically, because the PMP is used to routinely analyze simulations contributed to CMIP it leverages <a class="reference external" href="https://pcmdi.llnl.gov/CMIP6/Guide/dataUsers.html">the data conventions developed in support of CMIP</a>.  Many modeling groups have a workflow that conforms to CMIP or is very similiar to it, making it possible to adapt the PMP to assist in the model development process.</p>
<p>The PMP statistics are output in <a class="reference external" href="https://www.json.org/json-en.html">JSON format</a>, and the underlying diagnostics from which they were derived are typically saved in <a class="reference external" href="https://www.unidata.ucar.edu/software/netcdf">netCDF format</a>.</p>
</div>
<div class="section" id="basic-operation">
<h3>Basic Operation<a class="headerlink" href="#basic-operation" title="Permalink to this headline">¶</a></h3>
<p>The summary statistics available with the PMP can be run independently or as a collective (the later to be available via the next PMP version).  The python standard <a class="reference external" href="https://docs.python.org/3/library/argparse.html">argparse libary</a>  is used in all cases, enabling the inclusion of user-friendly interface options.  Here is a simple mock-up example of how argeparse is used from the unix command prompt ($):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mean_climate_statistics.py --model CESM2 --variable pr
</pre></div>
</div>
<p>Here, the “–model” option implemented in the PMP using argparse as is the “–variable” option used to specify “pr” (precipitation).</p>
<p>Because there are often many parameters to set before executing a PMP code, routine operation often involves setting the input options in an “input parameter” python file.  This is similiar to a “namelist” text file used in other climate analysis packages but having the input parameters set in a python file enables us to leverage the power of python.  So, for the about example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mean_climate_statistics.py -p input_parameters.py
</pre></div>
</div>
<p>where the “-p” switch indicates an input parameter file will be used, here with the following contents:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ more input_parameters.py
$ model CESM2
$ variable pr
</pre></div>
</div>
<p>The above use of setting input parameters on the command line or in an input file is possible with the argparse function.  However, there are circumstances where users of the PMP may want to use a combination of both (command line and input file) for the same execution.  To enable this option we make use of the Community Diagnostics Package (<a class="reference external" href="https://github.com/CDAT/cdp">CDP</a>) which enables parameters set in a file to be overridden by the command line. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mean_climate_statistics.py -p input_parameters.py --model E3SM1.0
</pre></div>
</div>
<p>is equivalent to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mean_climate_statistics.py --model E3SM1.0 --variable pr
</pre></div>
</div>
<p>The ability to use command line options in combination with input parameter files (with the former overrridding options set in the later) provides a tremendous convenience in setting up large jobs.</p>
</div>
<div class="section" id="getting-started">
<h3>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>a Python dictionnary correspondance table for the variable names: would you have specific recommendation for this? Do you plan to include a template of such correspondance table in the PCMDI-MP?</p></li>
<li><p>when I was at the PCMDI, we talked about a way to recognize the variable units ; do you confirm that it is still of interest (I’ve seen that there is a branch on github that should deal with this issue)</p></li>
<li><p>in some cases, the regridding is not necessary for the calculation of the metrics (as for the position of the subtropical jets). Would you consider adding an option in the parameter file so that the regridding can be switched off?</p></li>
</ul>
</div>
<div class="section" id="future-developments-and-challenges">
<h3>Future developments and challenges<a class="headerlink" href="#future-developments-and-challenges" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="install-using-anaconda.html" class="btn btn-neutral float-right" title="Install using Anaconda" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="PCMDI metrics package (PMP)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020 PCMDI

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>